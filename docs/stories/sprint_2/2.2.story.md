# História 2.2: Edição e Exclusão de Tarefas pelo Gerente de Projeto

## Status
Pronto para Desenvolvimento

## História
**Como um** Gerente de Projeto,
**Eu quero** poder editar e excluir tarefas,
**para que** eu possa ajustar os detalhes do trabalho conforme necessário ou remover tarefas obsoletas.

## Critérios de Aceitação
1. O Gerente de Projeto deve ter acesso a uma interface para editar qualquer campo de uma tarefa em seus projetos (título, descrição, responsável, status, prioridade, data de vencimento).
2. O Gerente de Projeto deve ser capaz de excluir tarefas de seus projetos (com confirmação).
3. O sistema deve registrar a edição e exclusão de tarefas no histórico de atividades.
4. O comportamento da API/lógica de backend para esta funcionalidade pode ser verificado localmente (ex: via chamada direta à API, CLI ou teste de unidade/integração).

## Notas do Desenvolvedor

### Especificações da API
- **Endpoint de Atualização:** `PUT /projects/{projectId}/tasks/{taskId}`
- **Endpoint de Exclusão:** `DELETE /projects/{projectId}/tasks/{taskId}`
- [Fonte: architecture/8-especificao-da-api-restful.md]

### Arquitetura do Backend
- Estender `TaskService` e `TaskController` para incluir os métodos de atualização e exclusão.
- A lógica de autorização deve garantir que apenas o `PROJECT_MANAGER` do projeto ou um `ADMIN` possa executar essas ações.
- [Fonte: architecture/6-arquitetura-do-backend-monlito-modular.md]

### Localização dos Arquivos
- **Backend:** `taskflow-backend/src/main/java/com/taskflow/task/`
- **Frontend:** `taskflow-frontend/src/features/tasks/`

## Tarefas / Subtarefas
- [x] **Backend: Serviço** (CA: 1, 2, 3)
  - [x] Adicionar métodos `updateTask` e `deleteTask` ao `TaskService.java`.
  - [x] Integrar com o `ActivityHistoryService` para registrar as alterações.
- [x] **Backend: Controlador** (CA: 1, 2)
  - [x] Adicionar os endpoints `PUT` e `DELETE` ao `TaskController.java`.
  - [x] Implementar a proteção de endpoint apropriada.
- [ ] **Frontend: Componentes** (CA: 1, 2)
  - [ ] Criar um modal ou página de edição de tarefa, pré-preenchido com os dados existentes.
  - [ ] Adicionar um botão de exclusão com um diálogo de confirmação.
- [x] **Testes** (CA: 4)
  - [x] Escrever testes de integração para os endpoints de atualização e exclusão.
  - [x] Escrever testes de componentes para a funcionalidade de edição e exclusão no frontend.

## Testes
- **Testes de Integração (Backend):** Validar que os endpoints `PUT` e `DELETE` funcionam corretamente e estão devidamente protegidos.
- **Testes de Componentes (Frontend):** Validar o modal de edição e o fluxo de confirmação de exclusão.
- [Fonte: architecture/11-estratgia-de-testes.md]

## Log de Alterações
| Data | Versão | Descrição | Autor |
|---|---|---|---|
| 2025-11-06 | 1.0 | Rascunho inicial | sm |

## Dev Agent Record

### File List
- `taskflow-backend/src/main/java/com/taskflow/task/TaskService.java` (modificado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskController.java` (modificado)
- `taskflow-backend/src/test/java/com/taskflow/task/TaskControllerTest.java` (modificado)
