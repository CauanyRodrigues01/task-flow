# História 2.4: Filtragem e Busca de Tarefas

## Status
Pronto para Desenvolvimento

## História
**Como um** usuário (Gerente de Projeto ou Colaborador),
**Eu quero** filtrar e pesquisar tarefas,
**para que** eu possa encontrar rapidamente o trabalho relevante.

## Critérios de Aceitação
1. O sistema deve permitir a filtragem de tarefas por status (A Fazer, Em Andamento, Concluído).
2. O sistema deve permitir a filtragem de tarefas por responsável.
3. O sistema deve permitir a filtragem de tarefas por prioridade.
4. O sistema deve permitir a busca de tarefas por palavras-chave no título ou na descrição.
5. Os filtros e a busca devem ser aplicáveis tanto na visualização em lista quanto no quadro Kanban.
6. O comportamento da API/lógica de backend para esta funcionalidade pode ser verificado localmente (ex: via chamada direta à API, CLI ou teste de unidade/integração).

## Notas do Desenvolvedor

### Especificações da API
- O endpoint `GET /projects/{projectId}/tasks` será modificado para aceitar parâmetros de query para filtragem e busca.
- **Parâmetros de Query:** `status`, `assigneeId`, `priority`, `keyword`.
- [Fonte: architecture/8-especificao-da-api-restful.md]

### Arquitetura do Backend
- A lógica de filtragem será implementada no `TaskRepository` usando Spring Data JPA Specifications ou Querydsl para construir a consulta dinamicamente.
- [Fonte: architecture/6-arquitetura-do-backend-monlito-modular.md]

### Localização dos Arquivos
- **Backend:** `taskflow-backend/src/main/java/com/taskflow/task/`
- **Frontend:** `taskflow-frontend/src/features/tasks/components/`

## Tarefas / Subtarefas
- [x] **Backend: Repositório e Serviço** (CA: 1, 2, 3, 4)
  - [x] Modificar `TaskRepository.java` para suportar consultas dinâmicas com base nos filtros.
  - [x] Modificar `TaskService.java` e `TaskController.java` para aceitar e aplicar os parâmetros de query.
- [ ] **Frontend: Componentes** (CA: 1, 2, 3, 4, 5)
  - [ ] Criar um componente `TaskFilters.tsx` com controles para status, responsável, prioridade e um campo de busca.
  - [ ] Integrar o estado dos filtros com a chamada à API para buscar as tarefas.
  - [ ] Garantir que as visualizações de lista e Kanban sejam atualizadas quando os filtros são aplicados.
- [x] **Testes** (CA: 6)
  - [x] Escrever testes de integração para o endpoint `GET /tasks` com várias combinações de filtros.
  - [x] Escrever testes de componentes para `TaskFilters.tsx`.

## Testes
- **Testes de Integração (Backend):** Validar exaustivamente a lógica de filtragem e busca na API.
- **Testes de Componentes (Frontend):** Validar que os controles de filtro funcionam e que a lista de tarefas é atualizada corretamente.
- [Fonte: architecture/11-estratgia-de-testes.md]

## Log de Alterações
| Data | Versão | Descrição | Autor |
|---|---|---|---|
| 2025-11-06 | 1.0 | Rascunho inicial | sm |

## Dev Agent Record

### File List
- `taskflow-backend/src/main/java/com/taskflow/task/TaskRepository.java` (modificado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskService.java` (modificado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskController.java` (modificado)
- `taskflow-backend/src/test/java/com/taskflow/task/TaskControllerTest.java` (modificado)
