# História 2.1: Criação e Detalhamento de Tarefas pelo Gerente de Projeto

## Status
Pronto para Desenvolvimento

## História
**Como um** Gerente de Projeto,
**Eu quero** criar tarefas com todos os detalhes necessários,
**para que** eu possa definir claramente o trabalho a ser feito e atribuí-lo à minha equipe.

## Critérios de Aceitação
1. O Gerente de Projeto deve ter acesso a uma interface para criar novas tarefas dentro de um projeto.
2. Ao criar uma tarefa, o Gerente de Projeto deve ser capaz de definir: título, descrição, responsável (um Colaborador do projeto), status inicial (A Fazer), prioridade e data de vencimento.
3. O sistema deve validar que o responsável atribuído é um Colaborador ativo no projeto.
4. O sistema deve registrar a criação da tarefa no histórico de atividades.
5. O comportamento da API/lógica de backend para esta funcionalidade pode ser verificado localmente (ex: via chamada direta à API, CLI ou teste de unidade/integração).

## Notas do Desenvolvedor

### Modelos de Dados
- A entidade `Task` deve ser criada no backend, conforme a especificação em `docs/architecture/5-modelagem-de-dados.md`.

### Especificações da API
- O endpoint a ser implementado é `POST /projects/{projectId}/tasks`, conforme `docs/architecture/8-especificao-da-api-restful.md`.

### Arquitetura do Backend
- Seguir o padrão "package-by-feature", criando um novo pacote `com.taskflow.task`.
- Este pacote conterá `Task.java` (Entidade), `TaskRepository.java` (Spring Data JPA), `TaskService.java` (lógica de negócio) e `TaskController.java`.

### Localização dos Arquivos (Backend)
- `taskflow-backend/src/main/java/com/taskflow/task/Task.java`
- `taskflow-backend/src/main/java/com/taskflow/task/TaskRepository.java`
- `taskflow-backend/src/main/java/com/taskflow/task/TaskService.java`
- `taskflow-backend/src/main/java/com/taskflow/task/TaskController.java`
- `taskflow-backend/src/main/java/com/taskflow/task/dto/TaskRequestDto.java`
- `taskflow-backend/src/main/java/com/taskflow/task/dto/TaskResponseDto.java`

### Localização dos Arquivos (Frontend)
- `taskflow-frontend/src/features/tasks/components/TaskForm.tsx`
- `taskflow-frontend/src/features/tasks/pages/CreateTaskPage.tsx`

## Tarefas / Subtarefas
- [x] **Backend: Modelo** (CA: 1, 2, 3)
  - [x] Criar a entidade JPA `Task.java` no pacote `com.taskflow.task`.
  - [x] Criar a interface `TaskRepository.java`.
  - [x] Criar os DTOs `TaskRequestDto` e `TaskResponseDto`.
- [x] **Backend: Serviço** (CA: 1, 2, 3, 4)
  - [x] Criar a classe `TaskService.java`.
  - [x] Implementar o método `createTask` que valida se o responsável é membro do projeto e registra a atividade.
- [x] **Backend: Controlador** (CA: 1)
  - [x] Criar `TaskController.java` com o endpoint `POST /projects/{projectId}/tasks`.
  - [x] Proteger o endpoint para `ADMIN` e `PROJECT_MANAGER`.
- [x] **Frontend: Componentes** (CA: 1, 2)
  - [x] Criar o formulário `TaskForm.tsx` para criação de tarefas.
  - [x] Criar a página `CreateTaskPage.tsx` que utiliza o formulário.
- [x] **Testes** (CA: 5)
  - [x] Escrever testes unitários para `TaskService`.
  - [x] Escrever testes de integração para `TaskController`.
  - [x] Escrever testes de componentes para `TaskForm.tsx`.

## Testes
- **Testes Unitários (Backend):** Validar a lógica de negócio em `TaskService`.
- **Testes de Integração (Backend):** Validar o fluxo completo da API de criação de tarefas.
- **Testes de Componentes (Frontend):** Validar o formulário de criação de tarefas.
- [Fonte: architecture/11-estratgia-de-testes.md]

## Log de Alterações
| Data | Versão | Descrição | Autor |
|---|---|---|---|
| 2025-11-06 | 1.0 | Rascunho inicial | sm |

## Dev Agent Record

### File List
- `taskflow-backend/src/main/java/com/taskflow/task/Task.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskStatus.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskPriority.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskRepository.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/dto/TaskRequestDto.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/dto/TaskResponseDto.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskService.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskController.java` (criado)
- `taskflow-backend/src/test/java/com/taskflow/task/TaskServiceTest.java` (criado)
- `taskflow-backend/src/test/java/com/taskflow/task/TaskControllerTest.java` (criado)
- `taskflow-frontend/task-form.html` (criado)
- `taskflow-frontend/assets/js/react/task-components.js` (criado)
