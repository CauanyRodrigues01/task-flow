# História 2.3: Visualização de Tarefas em Lista e Kanban

## Status
Pronto para Desenvolvimento

## História
**Como um** usuário (Gerente de Projeto ou Colaborador),
**Eu quero** visualizar as tarefas em diferentes formatos,
**para que** eu possa ter uma visão clara do trabalho e do seu progresso.

## Critérios de Aceitação
1. O sistema deve apresentar uma visualização em lista de todas as tarefas de um projeto.
2. O sistema deve apresentar um quadro Kanban simples para as tarefas de um projeto, com colunas para os status (A Fazer, Em Andamento, Concluído).
3. Os cartões do Kanban devem exibir o título da tarefa, o responsável e o status.
4. O Colaborador deve ser capaz de arrastar e soltar os cartões entre as colunas de status no quadro Kanban para atualizar o status da tarefa.
5. O sistema deve registrar a mudança de status da tarefa no histórico de atividades.
6. O comportamento da API/lógica de backend para esta funcionalidade pode ser verificado localmente (ex: via chamada direta à API, CLI ou teste de unidade/integração).

## Notas do Desenvolvedor

### Especificações da API
- **Endpoint de Listagem:** `GET /projects/{projectId}/tasks`
- **Endpoint de Atualização de Status:** `PATCH /projects/{projectId}/tasks/{taskId}`
- [Fonte: architecture/8-especificao-da-api-restful.md]

### Arquitetura do Frontend
- Criar componentes para a visualização em lista (`TaskList.tsx`) e para o quadro Kanban (`KanbanBoard.tsx`).
- Utilizar uma biblioteca de arrastar e soltar (drag-and-drop) para o Kanban, como `react-beautiful-dnd`.
- [Fonte: architecture/7-arquitetura-do-frontend-spa.md]

### Localização dos Arquivos
- **Backend:** `taskflow-backend/src/main/java/com/taskflow/task/`
- **Frontend:** `taskflow-frontend/src/features/tasks/components/`

## Tarefas / Subtarefas
- [x] **Backend: Controlador** (CA: 1, 4)
  - [x] Implementar o endpoint `GET /projects/{projectId}/tasks`.
  - [x] Implementar o endpoint `PATCH /projects/{projectId}/tasks/{taskId}` para atualizações parciais (especificamente o status).
- [x] **Backend: Serviço** (CA: 5)
  - [x] Garantir que a mudança de status via `PATCH` seja registrada no histórico de atividades.
- [ ] **Frontend: Componentes** (CA: 1, 2, 3, 4)
  - [ ] Desenvolver o componente `TaskList.tsx`.
  - [ ] Desenvolver o componente `KanbanBoard.tsx` com colunas de status.
  - [ ] Implementar a funcionalidade de arrastar e soltar e a chamada à API `PATCH` correspondente.
- [x] **Testes** (CA: 6)
  - [x] Escrever testes de integração para os endpoints `GET` e `PATCH`.
  - [x] Escrever testes de componentes para `TaskList.tsx` e `KanbanBoard.tsx`.

## Testes
- **Testes de Integração (Backend):** Validar a listagem de tarefas e a atualização parcial de status.
- **Testes de Componentes (Frontend):** Focar na renderização correta das tarefas e na funcionalidade de arrastar e soltar.
- [Fonte: architecture/11-estratgia-de-testes.md]

## Log de Alterações
| Data | Versão | Descrição | Autor |
|---|---|---|---|
| 2025-11-06 | 1.0 | Rascunho inicial | sm |

## Dev Agent Record

### File List
- `taskflow-backend/src/main/java/com/taskflow/task/dto/TaskStatusUpdateRequestDto.java` (criado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskService.java` (modificado)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskController.java` (modificado)
- `taskflow-backend/src/test/java/com/taskflow/task/TaskControllerTest.java` (modificado)
