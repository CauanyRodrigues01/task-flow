# História 1.3: Criação e Gestão de Projetos pelo Gerente de Projeto

**Status:** Rascunho

**Declaração da História:** Como Gerente de Projeto, quero criar e gerenciar projetos, para que eu possa organizar o trabalho da minha equipe e ter um espaço dedicado para minhas tarefas.

**Critérios de Aceitação:**
1.  O Gerente de Projeto deve ter acesso a uma interface para criar novos projetos.
2.  Ao criar um projeto, o Gerente de Projeto deve definir um nome e uma descrição.
3.  O Gerente de Projeto que cria o projeto é automaticamente definido como o único Gerente de Projeto responsável por ele.
4.  O Gerente de Projeto deve ser capaz de editar o nome e a descrição de seus projetos.
5.  O Gerente de Projeto deve ser capaz de deletar seus projetos (com confirmação).
6.  O sistema deve registrar a criação, edição e exclusão de projetos no histórico de atividades.
7.  O comportamento da API/lógica de backend para esta funcionalidade pode ser verificado localmente (ex: via chamada direta à API, CLI ou teste de unidade/integração).

**Notas de Desenvolvimento:**

*   **Insights da História Anterior**: A História 1.2 estabeleceu o gerenciamento de usuários, permitindo que um Administrador atribua o papel de 'Gerente de Projeto'. Esta história depende dessa capacidade.
*   **Modelos de Dados**:
    *   **Entidade Projeto**: A tabela `projects` contém `id`, `name`, `description`, `owner_id`.
    *   **Entidade Membro do Projeto**: A tabela `project_members` associa um `user_id` a um `project_id`.
        *   [Fonte: architecture/5-modelagem-de-dados.md#5.2-esquema-do-banco-de-dados-mysql-ddl]
*   **Especificações da API**:
    *   **URL Base**: `/api/v1`
    *   `POST /projects`: Cria um novo projeto.
    *   `GET /projects`: Lista projetos.
    *   `PUT /projects/{projectId}`: Atualiza um projeto.
    *   `DELETE /projects/{projectId}`: Deleta um projeto.
    *   **Autorização**: Endpoints protegidos com `@PreAuthorize` para garantir que apenas `PROJECT_MANAGER` (ou `ADMIN`) possa realizar essas operações.
        *   [Fonte: architecture/8-especificao-da-api-restful.md#8.2-projetos-projects]
*   **Especificações de Componentes (Frontend)**:
    *   `src/features/projects/ProjectListPage.tsx`: Página para listar projetos.
    *   `src/features/projects/ProjectForm.tsx`: Componente de formulário para criar/editar projetos.
    *   `src/services/projectService.ts`: Serviço para interagir com os endpoints de projetos.
    *   [Fonte: architecture/7-arquitetura-do-frontend-spa.md#7.1-organização-de-pastas]
*   **Localização de Arquivos**:
    *   **Backend (Java/Spring Boot)**:
        *   `taskflow-backend/src/main/java/com/taskflow/project/`: `ProjectController`, `ProjectService`, `ProjectRepository`.
        *   [Fonte: architecture/6-arquitetura-do-backend-monlito-modular.md#6.1-organização-de-pacotes]
    *   **Frontend (React/TypeScript)**:
        *   `taskflow-frontend/src/features/projects/`: Componentes de funcionalidade de projetos.
        *   [Fonte: architecture/7-arquitetura-do-frontend-spa.md#7.1-organização-de-pastas]
*   **Requisitos de Teste**:
    *   **Testes Unitários de Backend**: Testar `ProjectService` para lógica de criação, edição e exclusão de projetos.
    *   **Testes de Integração de Backend**: Testar `ProjectController` endpoints com diferentes papéis de usuário para verificar a autorização.
    *   **Testes de Componentes de Frontend**: Testar `ProjectListPage` e `ProjectForm`.
*   **Restrições Técnicas**:
    *   **Autorização**: Uso de `@PreAuthorize` no backend para controle de acesso.
    *   **Validação**: Validação de entrada para dados de projeto.

**Tarefas / Subtarefas:**

1.  **Desenvolvimento de Backend (CA: 1, 2, 3, 4, 5, 6, 7)**
    *   Implementar `ProjectController` com endpoints para CRUD de projetos.
    *   Implementar `ProjectService` para a lógica de negócio de gerenciamento de projetos.
    *   Adicionar anotações `@PreAuthorize` aos métodos do `ProjectController` para garantir que apenas Gerentes de Projeto (ou Admins) possam gerenciar seus projetos.
    *   **Testes Unitários**: Escrever testes unitários para `ProjectService`.
    *   **Testes de Integração**: Escrever testes de integração para `ProjectController`.
2.  **Desenvolvimento de Frontend (CA: 1, 2, 4, 5)**
    *   Criar `ProjectListPage` para exibir a lista de projetos do usuário.
    *   Criar `ProjectForm` para criar e editar projetos.
    *   Implementar `projectService` para interagir com os endpoints de projetos.
    *   Integrar as páginas de projeto no roteamento do frontend, protegidas para acesso apenas por usuários autenticados.
    *   **Testes de Componentes**: Escrever testes de componentes para `ProjectListPage` e `ProjectForm`.

**Notas sobre a Estrutura do Projeto:**
*   A estrutura de arquivos para backend e frontend se alinha com o padrão `Polyrepo` e `package-by-feature`.
