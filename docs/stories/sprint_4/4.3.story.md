# História 4.3: Visualização "Meu Foco" para Colaboradores

## Status
Pronto para Desenvolvimento

## História
**Como um** Colaborador,
**Eu quero** ter uma visão personalizada que mostre apenas minhas tarefas prioritárias,
**para que** eu possa me concentrar no meu trabalho sem distrações e informações irrelevantes.

## Critérios de Aceitação
1. O sistema deve oferecer uma visão "Meu Foco" que exiba apenas as tarefas atribuídas ao Colaborador logado.
2. Esta visão deve priorizar as tarefas com base na data de vencimento e na prioridade definida.
3. A interface desta visão deve ser extremamente *limpa* e livre de elementos não essenciais.
4. O Colaborador deve ser capaz de interagir com suas tarefas (ex: mudar status, adicionar comentários) diretamente desta visão.
5. O comportamento da API/lógica de backend para esta funcionalidade pode ser verificado localmente (ex: via chamada direta à API, CLI ou teste de unidade/integração).

## Notas do Desenvolvedor

### Especificações da API
- O endpoint existente para listar tarefas (`GET /projects/{projectId}/tasks`) pode ser estendido para suportar filtragem por responsável e ordenação.
- **Endpoint:** `GET /tasks/my-focus` (novo endpoint para simplificar a chamada do frontend)
  - **Permissão:** `COLLABORATOR` (o `userId` será extraído do token JWT).
  - **Parâmetros de Query:** `sortBy` (ex: `dueDate`, `priority`), `order` (ex: `asc`, `desc`).
  - **Resposta:** Lista de tarefas atribuídas ao usuário logado, ordenadas por data de vencimento e prioridade.
- [Fonte: architecture/8-especificao-da-api-restful.md (Adaptado para nova funcionalidade)]

### Arquitetura do Backend
- O `TaskService.java` precisará de um novo método para buscar tarefas por `assigneeId` e aplicar ordenação por `dueDate` e `priority`.
- Criar um novo `MyFocusController.java` ou estender `TaskController.java` para o endpoint `/tasks/my-focus`.
- [Fonte: architecture/6-arquitetura-do-backend-monlito-modular.md]

### Arquitetura do Frontend
- Criar um novo módulo de funcionalidade `my-focus` em `taskflow-frontend/src/features/`.
- Este módulo conterá o componente `MyFocusPage.tsx` (para a página principal da visualização) e componentes de exibição de tarefas.
- Utilizar um hook customizado (ex: `useMyFocusTasks`) para buscar os dados da API e gerenciar o estado de carregamento/erro.
- A interface deve ser minimalista, utilizando Tailwind CSS para um design limpo.
- [Fonte: architecture/7-arquitetura-do-frontend-spa.md]

### Localização dos Arquivos (Backend)
- `taskflow-backend/src/main/java/com/taskflow/task/TaskService.java` (modificação para novo método de busca)
- `taskflow-backend/src/main/java/com/taskflow/task/MyFocusController.java` (ou modificação em `TaskController`)
- `taskflow-backend/src/main/java/com/taskflow/task/dto/TaskResponseDto.java` (reutilizar DTO existente)
- [Fonte: architecture/4-estrutura-unificada-do-projeto-polyrepo.md]

### Localização dos Arquivos (Frontend)
- `taskflow-frontend/src/features/my-focus/MyFocusPage.tsx`
- `taskflow-frontend/src/features/my-focus/components/MyFocusTaskCard.tsx` (componente de exibição de tarefa)
- `taskflow-frontend/src/features/my-focus/hooks/useMyFocusTasks.ts`
- `taskflow-frontend/src/services/taskService.ts` (modificação para o novo endpoint)
- `taskflow-frontend/src/pages/MyFocus.tsx` (para a rota da página)
- [Fonte: architecture/4-estrutura-unificada-do-projeto-polyrepo.md]

## Tarefas / Subtarefas
- [ ] **Backend: Serviço** (CA: 1, 2)
  - [ ] Modificar `TaskService.java` para incluir um método `getTasksByAssigneeId(Long assigneeId, String sortBy, String order)` que busca e ordena tarefas.
- [ ] **Backend: Controlador** (CA: 1, 2)
  - [ ] Criar `MyFocusController.java` (ou estender `TaskController`) com o endpoint `GET /tasks/my-focus`.
  - [ ] Proteger o endpoint com `@PreAuthorize` para `COLLABORATOR` e garantir que o `assigneeId` seja o do usuário logado.
- [ ] **Frontend: Serviço de API** (CA: 1, 2)
  - [ ] Modificar `taskService.ts` para incluir uma função para chamar o endpoint `/tasks/my-focus`.
- [ ] **Frontend: Hooks** (CA: 1, 2)
  - [ ] Criar `useMyFocusTasks.ts` para buscar e gerenciar o estado das tarefas do "Meu Foco".
- [ ] **Frontend: Componentes** (CA: 1, 2, 3, 4)
  - [ ] Criar `MyFocusTaskCard.tsx` para exibir uma tarefa de forma limpa e minimalista.
  - [ ] Criar `MyFocusPage.tsx` para montar a visualização "Meu Foco", utilizando `MyFocusTaskCard`.
  - [ ] Garantir que a interface seja *clean* e livre de elementos não essenciais (CA: 3).
  - [ ] Implementar interações básicas com as tarefas (mudar status, adicionar comentários) diretamente desta visualização (CA: 4).
- [ ] **Frontend: Roteamento**
  - [ ] Adicionar uma rota para `/my-focus` em `taskflow-frontend/src/pages/MyFocus.tsx`.
- [ ] **Testes** (CA: 5)
  - [ ] Escrever testes unitários para o novo método em `TaskService` (backend).
  - [ ] Escrever testes de integração para o endpoint `/tasks/my-focus` (backend).
  - [ ] Escrever testes de componentes para `MyFocusTaskCard` e `MyFocusPage` (frontend).

## Testes
- **Backend:** Testes unitários para `TaskService` e testes de integração para o novo endpoint de "Meu Foco".
- **Frontend:** Testes de componentes para a visualização "Meu Foco" usando Jest e React Testing Library, focando na renderização e interações.
- [Fonte: architecture/11-estratgia-de-testes.md]

## Log de Alterações
| Data | Versão | Descrição | Autor |
|---|---|---|---|
| 2025-11-06 | 1.0 | Rascunho inicial | sm |