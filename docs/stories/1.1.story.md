# História 1.1: Configuração Inicial do Projeto e Autenticação de Usuários

**Status:** Rascunho

**Objetivo:** Estabelecer a infraestrutura central da aplicação e a autenticação segura de usuários, permitindo que os usuários façam login e gerenciem seus perfis.

**Contexto:** Esta história aborda o problema fundamental de perda de contexto e ruído de comunicação, fornecendo um ponto de entrada seguro e confiável para a plataforma TaskFlow.

**Padrões:**
*   **Backend:** Monólito Modular (Spring Boot), API RESTful, Segurança com JWT, senhas com hash BCrypt.
*   **Frontend:** Single Page Application (SPA) com UI baseada em componentes (React).
*   **Dados:** Banco de dados MySQL com uma entidade `User` contendo `id`, `name`, `email`, `password_hash` e `role`.

**Declaração da História:** Como usuário, quero me registrar e fazer login no TaskFlow, para que eu possa acessar o sistema com segurança e ter um perfil de usuário definido.

**Critérios de Aceitação:**
1. O sistema deve permitir que novos usuários se registrem com um e-mail e senha válidos.
2. O sistema deve permitir que usuários existentes façam login com suas credenciais.
3. O sistema deve validar as credenciais do usuário e emitir um token JWT válido após o login bem-sucedido.
4. O sistema deve armazenar informações básicas do perfil do usuário (nome, e-mail).
5. O sistema deve atribuir um perfil padrão (Colaborador) a novos usuários no momento do registro.
6. O sistema deve proteger as senhas dos usuários usando técnicas seguras de hash (BCrypt).
7. O sistema deve retornar mensagens de erro claras para tentativas de login ou registro falhas.
8. O comportamento da API/lógica de backend pode ser verificado localmente.

**Notas de Desenvolvimento:**

*   **Insights da História Anterior**: N/A (primeira história).
*   **Modelos de Dados**:
    *   **Entidade Usuário**: `id`, `name`, `email`, `password_hash` (BCrypt), `role` ('COLLABORATOR' por padrão).
        *   [Fonte: architecture/5-modelagem-de-dados.md]
*   **Especificações da API**:
    *   `POST /api/v1/auth/register`: Registra um novo usuário.
    *   `POST /api/v1/auth/login`: Autentica e retorna um token JWT.
        *   [Fonte: architecture/8-especificao-da-api-restful.md]
*   **Localização de Arquivos**:
    *   **Backend**: `taskflow-backend/src/main/java/com/taskflow/user/`, `.../security/`
    *   **Frontend**: `taskflow-frontend/src/features/auth/`
        *   [Fonte: architecture/4-estrutura-unificada-do-projeto-polyrepo.md]
*   **Restrições Técnicas**:
    *   Usar BCrypt para hash de senha.
    *   Usar Spring Security e JWT para autenticação.
    *   Validar entradas no backend com Bean Validation.
        *   [Fonte: architecture/12-consideraes-de-segurana.md]

**Tarefas / Subtarefas:**

1.  **Backend**
    *   Implementar a entidade `User` e o `UserRepository`.
    *   Implementar `UserService` para registro e autenticação.
    *   Implementar `AuthController` com os endpoints `/auth/register` e `/auth/login`.
    *   Configurar Spring Security com JWT e BCrypt.
    *   Escrever testes unitários e de integração.
2.  **Frontend**
    *   Criar os componentes `RegisterForm` e `LoginForm`.
    *   Implementar `authService` para as chamadas de API.
    *   Implementar `AuthContext` para gerenciamento de estado.
    *   Escrever testes de componentes.